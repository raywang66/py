# Compact Multi-Dimensional Tooltip - 优化版本

## 更新说明 (v2 - Compact Version)

根据用户反馈，我们对tooltip进行了优化，使其更加紧凑和实用。

### ✨ 主要改进

1. **紧凑的尺寸**
   - 图表尺寸从 6x4 缩小到 2.5x1.2 英寸
   - 只显示照片名称（文本），不显示缩略图
   - 整体tooltip大小大幅减小

2. **简洁的边框**
   - 从双重蓝框（2px #007AFF）改为单层灰框（1px #CCCCCC）
   - 边框圆角从 8px 减小到 4px
   - 更加低调，不抢眼

3. **水平单条柱状图**
   - **不再显示图例** - 用户很快就能记住颜色对应
   - 使用水平堆叠条形图（`barh`）而不是垂直柱状图
   - 只显示Y轴标签（Hue/Sat/Light），无其他装饰
   - 隐藏所有刻度和边框
   - 各段之间用白色细线分隔（0.5px）

4. **专注于占比**
   - 突出显示各区间的占比
   - 通过颜色直观判断分布
   - 如需详细信息，切换到对应的comparison标签页

## Tooltip 结构

### 旧版本（v1）
```
┌─────────────────────────────────┐
│ [照片缩略图 200x200]             │
├─────────────────────────────────┤
│ Saturation Distribution          │
│ [完整柱状图 + 图例]              │
├─────────────────────────────────┤
│ Lightness Distribution           │
│ [完整柱状图 + 图例]              │
└─────────────────────────────────┘
尺寸: ~600x450px
边框: 2px蓝色
```

### 新版本（v2 - 当前）
```
┌────────────────────┐
│ 📷 Portrait_1.jpg  │
├────────────────────┤
│ Sat  [═══════════] │
│ Light[═══════════] │
└────────────────────┘
尺寸: ~250x120px (缩小 75%)
边框: 1px灰色
```

## 视觉示例

### 在 Hue Comparison 上悬停
```
┌──────────────────────────┐
│ 📷 IMG_2024_001.jpg      │
├──────────────────────────┤
│ Sat  [灰▓▓▓蓝▓▓▓深蓝▓]   │  ← 饱和度分布一目了然
│ Light[棕▓▓▓▓黄▓▓米]      │  ← 亮度分布清晰可见
└──────────────────────────┘
```

颜色占比直接反映在条形图的长度上：
- **Sat**: 灰色（Very Low）少，蓝色（Normal/High）多 → 饱和度健康
- **Light**: 棕色（Low）适中，黄色（Mid）多，米色（High）少 → 曝光正常

### 在 Saturation Comparison 上悬停
```
┌──────────────────────────┐
│ 📷 Portrait_sunset.jpg   │
├──────────────────────────┤
│ Hue  [▓红▓▓橙▓▓▓正常▓▓]  │  ← 色调偏黄
│ Light[▓▓▓中间调▓▓▓]      │  ← 亮度集中
└──────────────────────────┘
```

## 使用体验

### 👍 优点

1. **快速扫描**: 小尺寸让你能快速在多个柱状图之间移动查看
2. **不遮挡视线**: 紧凑的tooltip不会挡住图表的大部分内容
3. **颜色记忆**: 没有图例反而促使用户记住颜色含义，提高效率
4. **专注比例**: 去除多余信息后，更关注各区间的占比关系
5. **渐进式深入**: 
   - 第一步：在comparison图上快速浏览（tooltip）
   - 第二步：如需详细了解某个维度，切换到对应tab

### 🎯 使用场景

**快速质检工作流**：
```
1. 打开 Hue Comparison
2. 鼠标快速扫过所有柱状图
3. 通过tooltip同时看到 Sat + Light
4. 发现异常照片 → 标记
5. 所有照片只需 10 秒扫描完毕！
```

**异常分析工作流**：
```
1. 在 Lightness Comparison 中发现过曝照片
2. 鼠标悬停
3. Tooltip显示：
   - Hue: 大量 Abnormal（灰色多）
   - Sat: 大量 Very Low（浅灰色多）
4. 结论：过曝导致色彩丢失
5. 无需切换tab，立即得出结论
```

## 技术细节

### 水平条形图代码
```python
def _plot_mini_hue(self, ax, photo_data: Dict):
    # 水平堆叠条形图
    left = 0
    for val, color in zip(values, colors):
        ax.barh(0, val, left=left, color=color, height=0.6, 
                edgecolor='white', linewidth=0.5)
        left += val
    
    # 只保留Y轴标签
    ax.set_ylabel('Hue', fontsize=7, weight='bold')
    
    # 隐藏所有装饰
    ax.set_yticks([])
    ax.set_xticks([])
    ax.spines['top'].set_visible(False)
    ax.spines['right'].set_visible(False)
    ax.spines['bottom'].set_visible(False)
    ax.spines['left'].set_visible(False)
```

### 尺寸对比
| 版本 | 宽度 | 高度 | 总像素 | 相对大小 |
|------|------|------|--------|----------|
| v1   | 600  | 450  | 270,000| 100%     |
| v2   | 250  | 120  | 30,000 | **11%**  |

**减小了 89% 的屏幕占用！**

## 颜色速查表

用户看几次就能记住，无需图例：

### Hue (色调)
- 🔴 深红 (#8B0000) = Very Red (0-10°, 350-360°)
- 🟠 橙红 (#CD5C5C) = Red-Orange (10-20°)
- 🟤 棕褐 (#D2B48C) = Normal (20-30°)
- 🟡 金黄 (#DAA520) = Yellow (30-40°)
- 🟨 明黄 (#FFD700) = Very Yellow (40-60°)
- ⚫ 灰色 (#696969) = Abnormal (60-350°)

### Saturation (饱和度)
- ⬜ 浅灰 (#D3D3D3) = Very Low (<15%)
- 🔵 浅蓝 (#B0C4DE) = Low (15-30%)
- 🔵 天蓝 (#87CEEB) = Normal (30-50%)
- 🔵 钢蓝 (#4682B4) = High (50-70%)
- 🔵 深蓝 (#191970) = Very High (>70%)

### Lightness (亮度)
- 🟫 深棕 (#8B4513) = Low (<33%)
- 🟤 秋色 (#CD853F) = Mid (33-67%)
- 🟨 沙色 (#F4A460) = High (>67%)

## 总结

v2版本专注于**快速、高效、不干扰**的设计理念：
- ✅ 紧凑的尺寸
- ✅ 简洁的边框
- ✅ 去除冗余信息（图例、缩略图）
- ✅ 突出核心价值（占比可视化）
- ✅ 支持快速扫描工作流

**设计哲学**：Less is More - 更少的信息，更高的效率！

---
*Updated: January 29, 2026*
*Version: 2.0 (Compact)*
